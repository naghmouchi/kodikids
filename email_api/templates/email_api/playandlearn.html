{% load static %}
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Play & Learn ‚Äî Kodikids</title>
  <meta name="description" content="Apprenez gratuitement la robotique, l'IA et la programmation avec Kodikids. Tutoriels, jeux et quiz pour enfants et adultes. Ressources √©ducatives pour le Qu√©bec, le Canada et la France.">
  <meta name="keywords" content="apprendre gratuitement, robotique, IA, programmation, tutoriels gratuits, jeux √©ducatifs, quiz, enfants, adultes, Qu√©bec, Canada, France">
  <meta name="robots" content="index, follow">
  <link rel="stylesheet" href="{% static 'email_api/css/style.css' %}">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÆ</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    body { background-color: #f4f7f6; overflow-x: hidden; }

    /* Hero Section */
    .hero-section {
      text-align: center; padding: 100px 20px 120px;
      background: linear-gradient(135deg, #FF512F 0%, #DD2476 100%);
      color: white; border-radius: 0 0 50px 50px; margin-bottom: 60px;
      position: relative; overflow: hidden;
    }
    .hero-title { font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; }
    .hero-subtitle { font-size: 1.3rem; opacity: 0.95; max-width: 800px; margin: 0 auto; line-height: 1.6; }
    .non-profit-badge {
        display: inline-block; background: rgba(255,255,255,0.2);
        padding: 5px 15px; border-radius: 20px; font-weight: bold;
        margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.4);
        text-decoration: none; color: white; transition: background 0.3s, transform 0.2s;
    }
    .non-profit-badge:hover { background: rgba(255,255,255,0.3); transform: scale(1.05); }

    /* Categories Grid */
    .categories-container {
        max-width: 1100px; margin: -80px auto 80px; padding: 0 20px;
        display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px; position: relative; z-index: 10;
    }
    .cat-card {
        background: white; padding: 30px; border-radius: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center;
        transition: transform 0.3s, box-shadow 0.3s; text-decoration: none; color: inherit;
        display: flex; flex-direction: column; align-items: center;
    }
    .cat-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
    .cat-icon { font-size: 4rem; margin-bottom: 15px; }
    .cat-title { font-size: 1.4rem; font-weight: 700; color: #333; margin-bottom: 10px; }
    .cat-desc { color: #666; font-size: 0.95rem; }

    /* Free Session Section */
    .session-section {
        max-width: 900px; margin: 0 auto 100px; padding: 0 20px;
        display: flex; flex-direction: column; gap: 40px;
    }
    .session-card {
        background: white; padding: 50px; border-radius: 30px;
        box-shadow: 0 15px 50px rgba(0,0,0,0.08); border-top: 6px solid #00b894;
    }
    .section-title { text-align: center; font-size: 2.2rem; color: #2d3436; margin-bottom: 20px; font-weight: 700; }
    .section-desc { text-align: center; color: #636e72; max-width: 700px; margin: 0 auto 40px; font-size: 1.1rem; }

    /* Form Styles */
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: #2d3436; }
    .form-input {
        width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 12px;
        font-size: 1rem; transition: border-color 0.3s;
    }
    .form-input:focus { border-color: #00b894; outline: none; }
    .submit-btn {
        width: 100%; padding: 16px; background: #00b894;
        color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold;
        cursor: pointer; transition: transform 0.2s;
    }
    .submit-btn:hover { transform: translateY(-2px); background: #00a383; }

    /* Donation Section */
    .donation-section {
        background: linear-gradient(135deg, #2b32b2 0%, #1488cc 100%);
        color: white; padding: 80px 20px; text-align: center;
        border-radius: 30px; margin: 0 20px 80px;
        box-shadow: 0 20px 40px rgba(20, 136, 204, 0.3);
    }
    .donate-btn {
        display: inline-block; margin-top: 30px;
        padding: 15px 40px; background: white; color: #2b32b2;
        border-radius: 50px; font-weight: 800; font-size: 1.2rem;
        text-decoration: none; transition: transform 0.2s, box-shadow 0.2s;
    }
    .donate-btn:hover { transform: scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

    .status-msg { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; font-weight: 600; display: none; }
    .status-msg.success { background: #e6fffa; color: #00b894; }
    .status-msg.error { background: #ffecec; color: #d63031; }

    /* Background Shapes */
    .bg-shape { position: absolute; border-radius: 50%; background: rgba(255,255,255,0.1); z-index: 1; }
  </style>
</head>
<body>
  <header>
    {% include "email_api/_header.html" %}
  </header>

  <main>
    <!-- Hero -->
    <section class="hero-section">
        <div style="position: relative; z-index: 2;">
            <a href="#donation" class="non-profit-badge" data-lang-key="badgeNonProfit">‚ù§Ô∏è 100% Gratuit & Non-lucratif</a>
            <h1 class="hero-title" data-lang-key="heroTitle">Play & Learn</h1>
            <p class="hero-subtitle" data-lang-key="heroDesc">Bienvenue dans notre espace d'apprentissage gratuit. Ici, nous croyons que l'√©ducation √† la technologie doit √™tre accessible √† tous. Explorez, jouez et apprenez sans limites.</p>
        </div>
        <div id="heroShapes"></div>
    </section>

    <!-- Categories Grid -->
    <section class="categories-container">
        <a href="/api/play/tutorials/" class="cat-card">
            <span class="cat-icon">üöÄ</span>
            <h3 class="cat-title" data-lang-key="catTuto">Tutoriels</h3>
            <p class="cat-desc" data-lang-key="catTutoDesc">Des guides pas √† pas pour ma√Ætriser le code et les robots.</p>
        </a>
        <a href="/api/play/games/" class="cat-card">
            <span class="cat-icon">üéÆ</span>
            <h3 class="cat-title" data-lang-key="catGames">Jeux</h3>
            <p class="cat-desc" data-lang-key="catGamesDesc">Apprendre en s'amusant avec des mini-jeux √©ducatifs.</p>
        </a>
        <a href="/api/play/quiz/" class="cat-card">
            <span class="cat-icon">‚ùì</span>
            <h3 class="cat-title" data-lang-key="catQuiz">Quiz</h3>
            <p class="cat-desc" data-lang-key="catQuizDesc">Testez vos connaissances et gagnez des badges.</p>
        </a>
        <a href="/api/play/robotics/" class="cat-card">
            <span class="cat-icon">ü§ñ</span>
            <h3 class="cat-title" data-lang-key="catRobot">Robotique</h3>
            <p class="cat-desc" data-lang-key="catRobotDesc">D√©couvrez Arduino, Micro:bit et Raspberry Pi.</p>
        </a>
           <a href="/api/play/stories/" class="cat-card">
            <span class="cat-icon">üìñ</span>
            <h3 class="cat-title" data-lang-key="catStories">Histoires</h3>
            <p class="cat-desc" data-lang-key="catStoriesDesc">Des histoires interactives pour apprendre la programmation.</p>
        </a>

    </section>

    <!-- Free Session Registration -->
    <section class="session-section">
        <div class="session-card">
            <h2 class="section-title" data-lang-key="sessionTitle">Prochaine Session Gratuite</h2>
            <p class="section-desc" data-lang-key="sessionDesc">Inscrivez-vous pour participer √† notre prochain atelier en ligne gratuit. Les places sont limit√©es !</p>
            
            <form id="sessionForm">
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblName">Votre Nom</label>
                    <input type="text" id="name" class="form-input" required placeholder="Votre nom complet">
                </div>
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblEmail">Votre Email</label>
                    <input type="email" id="email" class="form-input" required placeholder="exemple@email.com">
                </div>
                <button type="submit" class="submit-btn" id="sendBtn" data-lang-key="btnRegister">S'inscrire gratuitement</button>
            </form>
            <div id="statusMessage" class="status-msg"></div>
        </div>
    </section>

    <!-- Donation Section -->
    <div class="container">
        <section class="donation-section" id="donation">
            <h2 style="font-size: 2.5rem; margin-bottom: 20px;" data-lang-key="donateTitle">Soutenez notre mission</h2>
            <p style="font-size: 1.2rem; max-width: 700px; margin: 0 auto; opacity: 0.9;" data-lang-key="donateDesc">Cette plateforme est maintenue par des b√©n√©voles. Nous ne pouvons avancer et cr√©er plus de contenu gratuit qu'avec votre soutien.</p>
            <br></br>
            <div>
  <style>.pp-DN93DN8YVRWK6{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
  <form action="https://www.paypal.com/ncp/payment/DN93DN8YVRWK6" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
    <input class="pp-DN93DN8YVRWK6" type="submit" value="Payer" />
    <img src=https://www.paypalobjects.com/images/Debit_Credit_APM.svg alt="cards" />
    <section style="font-size: 0.75rem;"> Optimis√© par <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
  </form>
</div>
            
        </section>
    </div>
    
  </main>

  <footer>
    <div class="container">
      <span data-lang-key="footerText">¬© Play & Learn ‚Äî Enseignement de la programmation, des robots et de l'IA</span>
    </div>
  </footer>

  <script>
    // Translations
    const translations = {
      en: {
        badgeNonProfit: "‚ù§Ô∏è 100% Free & Non-profit",
        heroTitle: "Play & Learn",
        heroDesc: "Welcome to our free learning space. Here, we believe technology education should be accessible to everyone. Explore, play, and learn without limits.",
        catTuto: "Tutorials",
        catTutoDesc: "Step-by-step guides to master code and robots.",
        catGames: "Games",
        catGamesDesc: "Learn while having fun with educational mini-games.",
        catQuiz: "Quiz",
        catQuizDesc: "Test your knowledge and earn badges.",
        catRobot: "Robotics",
        catRobotDesc: "Discover Arduino, Micro:bit, and Raspberry Pi.",
        sessionTitle: "Next Free Session",
        sessionDesc: "Register to join our next free online workshop. Spots are limited!",
        lblName: "Your Name",
        lblEmail: "Your Email",
        btnRegister: "Register for Free",
        donateTitle: "Support Our Mission",
        donateDesc: "This platform is maintained by volunteers. We can only move forward and create more free content with your support.",
        btnDonate: "Donate ‚ù§Ô∏è",
        footerText: "¬© Play & Learn ‚Äî Teaching programming, robotics, and AI",
        msgSuccess: "Registration successful! You will receive the details by email.",
        msgError: "Error during registration. Please try again.",
        msgSending: "Registering..."
      },
      fr: {
        badgeNonProfit: "‚ù§Ô∏è 100% Gratuit & Non-lucratif",
        heroTitle: "Play & Learn",
        heroDesc: "Bienvenue dans notre espace d'apprentissage gratuit. Ici, nous croyons que l'√©ducation √† la technologie doit √™tre accessible √† tous. Explorez, jouez et apprenez sans limites.",
        catTuto: "Tutoriels",
        catTutoDesc: "Des guides pas √† pas pour ma√Ætriser le code et les robots.",
        catGames: "Jeux",
        catGamesDesc: "Apprendre en s'amusant avec des mini-jeux √©ducatifs.",
        catQuiz: "Quiz",
        catQuizDesc: "Testez vos connaissances et gagnez des badges.",
        catRobot: "Robotique",
        catRobotDesc: "D√©couvrez Arduino, Micro:bit et Raspberry Pi.",
        sessionTitle: "Prochaine Session Gratuite",
        sessionDesc: "Inscrivez-vous pour participer √† notre prochain atelier en ligne gratuit. Les places sont limit√©es !",
        lblName: "Votre Nom",
        lblEmail: "Votre Email",
        btnRegister: "S'inscrire gratuitement",
        donateTitle: "Soutenez notre mission",
        donateDesc: "Cette plateforme est maintenue par des b√©n√©voles. Nous ne pouvons avancer et cr√©er plus de contenu gratuit qu'avec votre soutien.",
        btnDonate: "Faire un don ‚ù§Ô∏è",
        footerText: "¬© Play & Learn ‚Äî Enseignement de la programmation, des robots et de l'IA",
        msgSuccess: "Inscription r√©ussie ! Vous recevrez les d√©tails par email.",
        msgError: "Erreur lors de l'inscription. Veuillez r√©essayer.",
        msgSending: "Inscription en cours..."
      }
    };

    let currentLang = 'fr';
    const langSwitcher = document.getElementById('lang-switcher');

    function setLanguage(lang) {
      const trans = translations[lang];
      document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.dataset.langKey;
        if (trans[key]) el.textContent = trans[key];
      });
      currentLang = lang;
      if(langSwitcher) langSwitcher.textContent = lang === 'fr' ? 'EN' : 'FR';
      document.documentElement.lang = lang;
    }

    if(langSwitcher) {
      langSwitcher.addEventListener('click', () => {
        setLanguage(currentLang === 'fr' ? 'en' : 'fr');
      });
    }

    // Animation
    const heroShapes = document.getElementById('heroShapes');
    for(let i=0; i<15; i++) {
        const s = document.createElement('div');
        s.classList.add('bg-shape');
        const size = Math.random() * 80 + 20;
        s.style.width = size + 'px';
        s.style.height = size + 'px';
        s.style.left = Math.random() * 100 + '%';
        s.style.top = Math.random() * 100 + '%';
        heroShapes.appendChild(s);
    }
    anime({
        targets: '.bg-shape',
        translateY: () => anime.random(-50, 50),
        translateX: () => anime.random(-50, 50),
        opacity: [0.1, 0.3],
        duration: () => anime.random(3000, 8000),
        direction: 'alternate',
        loop: true,
        easing: 'easeInOutSine'
    });

    // Form Handling
    const form = document.getElementById('sessionForm');
    const statusMsg = document.getElementById('statusMessage');
    const sendBtn = document.getElementById('sendBtn');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;

        const adminEmail = "hassen.naghmouchi@gmail.com";
        const subject = `Inscription Session Gratuite: ${name}`;
        const messageBody = `Nouvelle inscription pour la session gratuite.\nNom: ${name}\nEmail: ${email}`;

        sendBtn.disabled = true;
        sendBtn.textContent = translations[currentLang].msgSending;
        statusMsg.style.display = 'none';

        const apiUrl = 'https://hassen86naghmouchi.pythonanywhere.com/api/send-email/';

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ recipient: adminEmail, subject: subject, message: messageBody })
            });

            if (response.ok) {
                statusMsg.textContent = translations[currentLang].msgSuccess;
                statusMsg.className = 'status-msg success';
                form.reset();
            } else {
                throw new Error("API Error");
            }
        } catch (error) {
            statusMsg.textContent = translations[currentLang].msgError;
            statusMsg.className = 'status-msg error';
        } finally {
            statusMsg.style.display = 'block';
            sendBtn.disabled = false;
            sendBtn.textContent = translations[currentLang].btnRegister;
        }
    });
  </script>
</body>
</html>
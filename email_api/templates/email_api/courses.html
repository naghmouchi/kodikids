{% load static %}
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nos Cours ‚Äî Kodikids</title>
  <link rel="stylesheet" href="{% static 'email_api/css/style.css' %}">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    body { background-color: #f4f7f6; overflow-x: hidden; }
    
    /* Hero Section */
    .hero-section {
      text-align: center; padding: 80px 20px 100px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; border-radius: 0 0 50px 50px; margin-bottom: 60px;
      position: relative; overflow: hidden;
    }
    .hero-title { font-size: 3rem; font-weight: 800; margin-bottom: 15px; }
    .hero-subtitle { font-size: 1.2rem; opacity: 0.9; max-width: 600px; margin: 0 auto; }

    /* Courses Grid */
    .courses-container {
        max-width: 1200px; margin: -80px auto 60px; padding: 0 20px;
        display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px; position: relative; z-index: 10;
    }
    
    .course-card {
        background: white; padding: 30px; border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); cursor: default;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        border: 2px solid transparent; text-align: center;
        display: flex; flex-direction: column; align-items: center;
    }
    .course-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(118, 75, 162, 0.15); }
    
    .c-icon { font-size: 3.5rem; margin-bottom: 15px; display: block; }
    .c-title { font-size: 1.5rem; font-weight: 700; color: #2d3436; margin-bottom: 10px; }
    .c-desc { font-size: 0.95rem; color: #636e72; line-height: 1.5; margin-bottom: 20px; }
    
    .learn-more-btn {
        padding: 10px 20px; border: 2px solid #764ba2; border-radius: 50px;
        color: #764ba2; font-weight: bold; background: transparent;
        cursor: pointer; transition: all 0.2s;
    }
    .learn-more-btn:hover { background: #764ba2; color: white; }

    /* Details Section */
    .details-section {
        max-width: 1000px; margin: 0 auto 80px; padding: 40px;
        background: white; border-radius: 24px; box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        display: none; /* Hidden by default */
        animation: slideDown 0.5s ease-out;
    }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

    .levels-grid {
        display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px; margin-top: 30px;
    }
    .level-card {
        background: #f9f9f9; padding: 20px; border-radius: 15px; border-left: 4px solid #667eea;
    }
    .level-title { font-weight: 700; color: #2d3436; margin-bottom: 10px; font-size: 1.1rem; }
    .level-desc { font-size: 0.9rem; color: #555; line-height: 1.6; }

    /* Form Section */
    .form-section { max-width: 700px; margin: 0 auto 100px; padding: 0 20px; }
    .contact-card {
        background: white; padding: 40px; border-radius: 24px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08); border-top: 5px solid #667eea;
    }
    
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: #2d3436; font-size: 0.95rem; }
    .form-input, .form-textarea, .form-select {
        width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 10px;
        font-size: 1rem; transition: border-color 0.3s, box-shadow 0.3s; font-family: inherit;
        background: white;
    }
    .form-input:focus, .form-textarea:focus, .form-select:focus { border-color: #667eea; outline: none; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
    
    .submit-btn {
        width: 100%; padding: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold;
        cursor: pointer; transition: transform 0.2s; margin-top: 10px;
    }
    .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(118, 75, 162, 0.25); }

    .status-msg { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; font-weight: 600; display: none; }
    .status-msg.success { background: #e6fffa; color: #00b894; }
    .status-msg.error { background: #ffecec; color: #d63031; }

    .bg-shape { position: absolute; border-radius: 50%; background: rgba(255,255,255,0.1); z-index: 1; }
  </style>
</head>
<body>
  <header>
    {% include "email_api/_header.html" %}
  </header>

  <main>
    <!-- Hero -->
    <section class="hero-section">
        <div style="position: relative; z-index: 2;">
            <h1 class="hero-title" data-lang-key="heroTitle">Nos Cours</h1>
            <p class="hero-subtitle" data-lang-key="heroDesc">D√©couvrez nos programmes adapt√©s √† tous les √¢ges et niveaux. De l'initiation √† l'expertise.</p>
        </div>
        <div id="heroShapes"></div>
    </section>

    <!-- Courses Grid -->
    <section class="courses-container">
        <!-- Python -->
        <div class="course-card">
            <span class="c-icon">üêç</span>
            <h3 class="c-title">Python Master</h3>
            <p class="c-desc" data-lang-key="descPython">Le langage id√©al pour d√©buter et aller loin dans la Data et l'IA.</p>
            <button class="learn-more-btn" onclick="showDetails('python')" data-lang-key="btnLearn">En savoir plus</button>
        </div>

        <!-- Web Dev -->
        <div class="course-card">
            <span class="c-icon">üíª</span>
            <h3 class="c-title">Web Development</h3>
            <p class="c-desc" data-lang-key="descWeb">Cr√©ez des sites web modernes et des applications interactives.</p>
            <button class="learn-more-btn" onclick="showDetails('web')" data-lang-key="btnLearn">En savoir plus</button>
        </div>

        <!-- Robotics -->
        <div class="course-card">
            <span class="c-icon">ü§ñ</span>
            <h3 class="c-title">Robotique & IoT</h3>
            <p class="c-desc" data-lang-key="descRobot">Construisez et programmez vos propres robots intelligents.</p>
            <button class="learn-more-btn" onclick="showDetails('robot')" data-lang-key="btnLearn">En savoir plus</button>
        </div>
    </section>

    <!-- Dynamic Details Section -->
    <section id="detailsSection" class="details-section">
        <h2 id="detailTitle" style="text-align:center; color:#333; margin-bottom:10px;">D√©tails du cours</h2>
        <p id="detailDesc" style="text-align:center; color:#666; max-width:700px; margin:0 auto;"></p>
        
        <div class="levels-grid">
            <div class="level-card">
                <div class="level-title" data-lang-key="lvl1Title">Niveau 1 : D√©butant</div>
                <p class="level-desc" id="lvl1Desc">...</p>
            </div>
            <div class="level-card">
                <div class="level-title" data-lang-key="lvl2Title">Niveau 2 : Interm√©diaire</div>
                <p class="level-desc" id="lvl2Desc">...</p>
            </div>
            <div class="level-card">
                <div class="level-title" data-lang-key="lvl3Title">Niveau 3 : Avanc√©</div>
                <p class="level-desc" id="lvl3Desc">...</p>
            </div>
        </div>
        
        <div style="text-align:center; margin-top:30px;">
            <button class="submit-btn" style="width:auto; padding: 12px 30px;" onclick="scrollToForm()" data-lang-key="btnRegisterNow">S'inscrire √† ce cours</button>
        </div>
    </section>

    <!-- Registration Form -->
    <section class="form-section" id="formSection">
        <div class="contact-card">
            <h2 style="text-align:center; margin-bottom:30px; color:#333;" data-lang-key="formTitle">Inscription</h2>
            <form id="registrationForm">
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblCourse">Cours choisi</label>
                    <input type="text" id="courseInput" class="form-input" readonly placeholder="S√©lectionnez un cours ci-dessus">
                </div>
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblLevel">Niveau souhait√©</label>
                    <select id="levelInput" class="form-select">
                        <option value="Niveau 1">Niveau 1 : D√©butant</option>
                        <option value="Niveau 2">Niveau 2 : Interm√©diaire</option>
                        <option value="Niveau 3">Niveau 3 : Avanc√©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblName">Votre Nom</label>
                    <input type="text" id="name" class="form-input" required placeholder="Votre nom complet">
                </div>
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblEmail">Votre Email</label>
                    <input type="email" id="email" class="form-input" required placeholder="exemple@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label" data-lang-key="lblMessage">Message (Optionnel)</label>
                    <textarea id="message" class="form-textarea" rows="3" placeholder="Questions ou disponibilit√©s..."></textarea>
                </div>
                <button type="submit" class="submit-btn" id="sendBtn" data-lang-key="btnSubmit">Envoyer la demande</button>
            </form>
            <div id="statusMessage" class="status-msg"></div>
        </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <span data-lang-key="footerText">¬© Play & Learn ‚Äî Enseignement de la programmation, des robots et de l'IA</span>
    </div>
  </footer>

  <script>
    // Data for courses
    const courseData = {
        python: {
            title: "Python Master",
            desc: "Un parcours complet pour ma√Ætriser le langage le plus polyvalent du moment.",
            lvl1: "Introduction √† la programmation, variables, boucles et conditions. Cr√©ation de petits jeux textuels.",
            lvl2: "Fonctions, modules, gestion de fichiers. Introduction √† l'interface graphique avec Tkinter ou Pygame.",
            lvl3: "Analyse de donn√©es (Pandas), Web Scraping et introduction au Machine Learning."
        },
        web: {
            title: "Web Development",
            desc: "Devenez un d√©veloppeur web capable de cr√©er des sites de A √† Z.",
            lvl1: "HTML5 & CSS3. Cr√©er une page web statique, mise en page et design responsive.",
            lvl2: "JavaScript & DOM. Rendre les pages interactives, formulaires et animations.",
            lvl3: "Frameworks (React ou Vue.js) et Backend (Node.js ou Django). Cr√©ation d'applications compl√®tes."
        },
        robot: {
            title: "Robotique & IoT",
            desc: "L'√©lectronique et la programmation au service du monde r√©el.",
            lvl1: "Arduino basique. LEDs, boutons, capteurs simples. Comprendre l'√©lectricit√©.",
            lvl2: "Projets avanc√©s. Moteurs, √©crans LCD, robots autonomes √©viteurs d'obstacles.",
            lvl3: "Raspberry Pi & IoT. Connecter des objets √† Internet, cam√©ra, domotique et Python."
        }
    };

    // Translations
    const translations = {
      en: {
        heroTitle: "Our Courses",
        heroDesc: "Discover our programs adapted to all ages and levels. From initiation to expertise.",
        descPython: "The ideal language to start and go far in Data and AI.",
        descWeb: "Create modern websites and interactive applications.",
        descRobot: "Build and program your own intelligent robots.",
        btnLearn: "Learn More",
        lvl1Title: "Level 1: Beginner",
        lvl2Title: "Level 2: Intermediate",
        lvl3Title: "Level 3: Advanced",
        btnRegisterNow: "Register for this course",
        formTitle: "Registration",
        lblCourse: "Selected Course",
        lblLevel: "Desired Level",
        lblName: "Your Name",
        lblEmail: "Your Email",
        lblMessage: "Message (Optional)",
        btnSubmit: "Send Request",
        footerText: "¬© Play & Learn ‚Äî Teaching programming, robotics, and AI",
        msgSuccess: "Registration request sent! We will contact you shortly.",
        msgError: "Error sending request. Please try again.",
        msgSending: "Sending..."
      },
      fr: {
        heroTitle: "Nos Cours",
        heroDesc: "D√©couvrez nos programmes adapt√©s √† tous les √¢ges et niveaux. De l'initiation √† l'expertise.",
        descPython: "Le langage id√©al pour d√©buter et aller loin dans la Data et l'IA.",
        descWeb: "Cr√©ez des sites web modernes et des applications interactives.",
        descRobot: "Construisez et programmez vos propres robots intelligents.",
        btnLearn: "En savoir plus",
        lvl1Title: "Niveau 1 : D√©butant",
        lvl2Title: "Niveau 2 : Interm√©diaire",
        lvl3Title: "Niveau 3 : Avanc√©",
        btnRegisterNow: "S'inscrire √† ce cours",
        formTitle: "Inscription",
        lblCourse: "Cours choisi",
        lblLevel: "Niveau souhait√©",
        lblName: "Votre Nom",
        lblEmail: "Votre Email",
        lblMessage: "Message (Optionnel)",
        btnSubmit: "Envoyer la demande",
        footerText: "¬© Play & Learn ‚Äî Enseignement de la programmation, des robots et de l'IA",
        msgSuccess: "Demande d'inscription envoy√©e ! Nous vous recontacterons bient√¥t.",
        msgError: "Erreur lors de l'envoi. Veuillez r√©essayer.",
        msgSending: "Envoi en cours..."
      }
    };

    let currentLang = 'fr';
    const langSwitcher = document.getElementById('lang-switcher');

    function setLanguage(lang) {
      const trans = translations[lang];
      document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.dataset.langKey;
        if (trans[key]) el.textContent = trans[key];
      });
      currentLang = lang;
      if(langSwitcher) langSwitcher.textContent = lang === 'fr' ? 'EN' : 'FR';
      document.documentElement.lang = lang;
    }

    if(langSwitcher) {
      langSwitcher.addEventListener('click', () => {
        setLanguage(currentLang === 'fr' ? 'en' : 'fr');
      });
    }

    // Logic for Details
    function showDetails(courseKey) {
        const section = document.getElementById('detailsSection');
        section.style.display = 'block';
        
        const data = courseData[courseKey];
        document.getElementById('detailTitle').textContent = data.title;
        document.getElementById('detailDesc').textContent = data.desc;
        document.getElementById('lvl1Desc').textContent = data.lvl1;
        document.getElementById('lvl2Desc').textContent = data.lvl2;
        document.getElementById('lvl3Desc').textContent = data.lvl3;

        // Pre-fill form
        document.getElementById('courseInput').value = data.title;

        // Scroll to details
        section.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function scrollToForm() {
        document.getElementById('formSection').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // Animation
    const heroShapes = document.getElementById('heroShapes');
    for(let i=0; i<15; i++) {
        const s = document.createElement('div');
        s.classList.add('bg-shape');
        const size = Math.random() * 80 + 20;
        s.style.width = size + 'px';
        s.style.height = size + 'px';
        s.style.left = Math.random() * 100 + '%';
        s.style.top = Math.random() * 100 + '%';
        heroShapes.appendChild(s);
    }
    anime({
        targets: '.bg-shape',
        translateY: () => anime.random(-50, 50),
        translateX: () => anime.random(-50, 50),
        opacity: [0.1, 0.3],
        duration: () => anime.random(3000, 8000),
        direction: 'alternate',
        loop: true,
        easing: 'easeInOutSine'
    });

    // Form Submit
    const form = document.getElementById('registrationForm');
    const statusMsg = document.getElementById('statusMessage');
    const sendBtn = document.getElementById('sendBtn');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const course = document.getElementById('courseInput').value;
        const level = document.getElementById('levelInput').value;
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const msg = document.getElementById('message').value;

        const adminEmail = "hassen.naghmouchi@gmail.com";
        const subject = `Inscription Cours: ${course} - ${name}`;
        const messageBody = `Cours: ${course}\nNiveau: ${level}\nNom: ${name}\nEmail: ${email}\nMessage: ${msg}`;

        sendBtn.disabled = true;
        sendBtn.textContent = translations[currentLang].msgSending;
        statusMsg.style.display = 'none';

        const apiUrl = 'https://hassen86naghmouchi.pythonanywhere.com/api/send-email/';

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ recipient: adminEmail, subject: subject, message: messageBody })
            });

            if (response.ok) {
                statusMsg.textContent = translations[currentLang].msgSuccess;
                statusMsg.className = 'status-msg success';
                form.reset();
                document.getElementById('detailsSection').style.display = 'none';
            } else {
                throw new Error("API Error");
            }
        } catch (error) {
            statusMsg.textContent = translations[currentLang].msgError;
            statusMsg.className = 'status-msg error';
        } finally {
            statusMsg.style.display = 'block';
            sendBtn.disabled = false;
            sendBtn.textContent = translations[currentLang].btnSubmit;
        }
    });
  </script>
</body>
</html>
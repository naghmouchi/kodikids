{% load static %}
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tutoriel Arduino ‚Äî Kodikids</title>
  <link rel="stylesheet" href="{% static 'email_api/css/style.css' %}">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ö°</text></svg>">
  <style>
    .tutorial-section { margin-bottom: 4rem; padding: 20px 0; }
    .tutorial-section h1, .tutorial-section h2 { color: #0b1724; margin-bottom: 1rem; }
    .lead { font-size: 1.2rem; color: #555; max-width: 800px; }
    
    /* Components Grid */
    .component-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px; margin-top: 30px; }
    .component-card { 
      background: white; padding: 24px; border-radius: 16px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: all 0.3s ease; 
      cursor: pointer; border: 2px solid transparent; text-align: center;
    }
    .component-card:hover { transform: translateY(-5px); border-color: #00979d; box-shadow: 0 8px 20px rgba(0, 151, 157, 0.15); }
    .component-icon { font-size: 3.5rem; margin-bottom: 16px; display: block; }
    .component-card h3 { margin: 0; font-size: 1.1rem; font-weight: 700; color: #333; }

    /* Detail Box */
    #comp-detail { 
      margin-top: 30px; padding: 30px; background: #f0fbfb; 
      border-radius: 16px; border-left: 5px solid #00979d; 
      display: none; animation: fadeIn 0.4s ease;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Coding Playground */
    .code-playground { 
      background: #2d3436; padding: 20px; border-radius: 16px; 
      margin-top: 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.2);
    }
    .block-container { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    .block-btn { 
      border: none; padding: 12px 24px; border-radius: 30px; 
      cursor: pointer; font-weight: 600; font-size: 0.95rem; color: white;
      transition: transform 0.1s, filter 0.2s; box-shadow: 0 2px 0 rgba(0,0,0,0.2);
    }
    .block-btn:active { transform: translateY(2px); box-shadow: none; }
    .block-btn:hover { filter: brightness(1.1); }
    
    .btn-code { background-color: #00979d; }
    .btn-reset { background-color: #ff5e57; margin-left: auto; }

    /* Simulation Area */
    .simulation-area { 
      background: #ffffff; height: 350px; border-radius: 16px; 
      position: relative; overflow: hidden; border: 2px solid #e0e0e0; 
      margin-top: 24px; display: flex; align-items: center; justify-content: center;
      background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Virtual Arduino */
    .virtual-board {
        width: 220px; height: 160px; background: #008c92; border-radius: 6px;
        position: relative; box-shadow: 0 10px 25px rgba(0, 140, 146, 0.4);
        display: flex; align-items: center; justify-content: center;
        color: rgba(255,255,255,0.8); font-weight: bold; font-family: monospace;
    }
    .virtual-board::before { content: 'ARDUINO'; position: absolute; top: 10px; left: 15px; font-size: 14px; }
    .virtual-board::after { content: 'UNO'; position: absolute; bottom: 10px; right: 15px; font-size: 20px; font-style: italic;}
    
    .virtual-led {
        width: 20px; height: 20px; background: #444; border-radius: 50%;
        position: absolute; top: 30px; right: 50px; border: 2px solid #333;
        transition: background 0.1s, box-shadow 0.1s;
    }
    .virtual-led::after { content: 'L'; position: absolute; right: -15px; top: 2px; font-size: 10px; color: white; }
    
    .virtual-led.on { background: #ff9f43; box-shadow: 0 0 20px #ff9f43; border-color: #ff9f43; }
    
    .usb-port { width: 40px; height: 30px; background: #bdc3c7; position: absolute; left: -5px; top: 20px; border-radius: 2px; }
    .chip { width: 80px; height: 20px; background: #2d3436; position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); }

    /* Quiz Styles */
    .quiz-container { background: white; padding: 24px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-top: 20px; }
    .quiz-question { margin-bottom: 24px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    .quiz-question:last-child { border-bottom: none; padding-bottom: 0; }
    .question-text { font-weight: 700; font-size: 1.1rem; margin-bottom: 12px; color: #2d3436; }
    .quiz-opt { 
      display: block; width: 100%; text-align: left; padding: 12px 15px; 
      margin-bottom: 8px; border: 2px solid #e0e0e0; border-radius: 8px; 
      background: white; cursor: pointer; transition: all 0.2s; font-size: 1rem;
    }
    .quiz-opt:hover { border-color: #00979d; background: #f0fbfb; }
    .quiz-opt.correct { border-color: #00b894; background: #e6fffa; color: #006652; pointer-events: none; }
    .quiz-opt.wrong { border-color: #d63031; background: #ffecec; color: #d63031; }
    .feedback { font-size: 0.95rem; margin-top: 8px; font-weight: 600; min-height: 1.2em; }
  </style>
</head>
<body>
  <header>
    {% include "email_api/_header.html" %}
  </header>

  <main class="container" id="main">
    
    <!-- Hero Section -->
    <section class="tutorial-section">
      <h1 data-lang-key="pageTitle" style="font-size: 2.5rem; font-weight: 800;">D√©couvrir Arduino</h1>
      <p class="lead" data-lang-key="pageDesc">Arduino est une plateforme √©lectronique open-source facile √† utiliser. C'est l'outil id√©al pour cr√©er des objets interactifs, de la domotique aux robots.</p>
    </section>

    <!-- Components Section -->
    <section class="tutorial-section">
      <h2 data-lang-key="compTitle">Les composants de base</h2>
      <p data-lang-key="compDesc">Cliquez sur un composant pour comprendre son r√¥le.</p>
      
      <div class="component-grid">
        <div class="component-card" onclick="showDetail('uno')">
          <span class="component-icon">üìü</span>
          <h3 data-lang-key="compUno">Carte Arduino Uno</h3>
        </div>
        <div class="component-card" onclick="showDetail('breadboard')">
          <span class="component-icon">üçû</span>
          <h3 data-lang-key="compBread">Breadboard</h3>
        </div>
        <div class="component-card" onclick="showDetail('led')">
          <span class="component-icon">üí°</span>
          <h3 data-lang-key="compLed">LED (DEL)</h3>
        </div>
        <div class="component-card" onclick="showDetail('resistor')">
          <span class="component-icon">üå≠</span>
          <h3 data-lang-key="compRes">R√©sistance</h3>
        </div>
      </div>

      <div id="comp-detail">
        <h3 id="detail-title" style="margin-top:0; font-size: 1.5rem;"></h3>
        <p id="detail-desc" style="margin-bottom:15px; line-height: 1.6;"></p>
        
        <div style="margin-bottom: 15px; padding: 15px; background: #fff; border-radius: 8px; border: 1px solid #e0e0e0;">
            <strong data-lang-key="usageTitle" style="color: #00979d; display:block; margin-bottom:5px;">Comment l'utiliser ?</strong>
            <p id="detail-usage" style="margin:0; color: #333;"></p>
        </div>

        <div style="padding-top: 15px; border-top: 2px dashed #cbd5e0;">
            <strong data-lang-key="realLifeTitle" style="color: #00979d; display:block; margin-bottom:5px;">Dans la vraie vie :</strong>
            <p id="detail-real-life" style="margin:0; color: #555; font-style: italic;"></p>
        </div>
      </div>
    </section>

    <!-- Coding Section -->
    <section class="tutorial-section">
      <h2 data-lang-key="codeTitle">Programmer l'Arduino</h2>
      <p data-lang-key="codeDesc">Le langage Arduino est bas√© sur C++. On utilise des fonctions comme <code>digitalWrite</code> pour contr√¥ler l'√©lectricit√©. Teste le simulateur ci-dessous !</p>

      <div class="code-playground">
        <div class="block-container">
          <button class="block-btn btn-code" onclick="runCommand('on')" data-lang-key="btnOn">Allumer LED</button>
          <button class="block-btn btn-code" onclick="runCommand('off')" data-lang-key="btnOff">√âteindre LED</button>
          <button class="block-btn btn-code" onclick="runCommand('blink')" data-lang-key="btnBlink">Clignoter (Blink)</button>
          <button class="block-btn btn-reset" onclick="runCommand('reset')" data-lang-key="btnReset">R√©initialiser</button>
        </div>
      </div>

      <div class="simulation-area">
        <div class="virtual-board">
            <div class="usb-port"></div>
            <div id="virtual-led" class="virtual-led"></div>
            <div class="chip"></div>
        </div>
      </div>
    </section>

    <!-- Project Ideas Section -->
    <section class="tutorial-section">
      <h2 data-lang-key="projectTitle">Id√©es de projets</h2>
      <p data-lang-key="projectDesc">Quelques circuits classiques pour d√©buter.</p>
      
      <div class="component-grid">
        <div class="component-card" style="cursor: default;">
          <span class="component-icon">üö¶</span>
          <h3 data-lang-key="projTrafficTitle">Feu tricolore</h3>
          <p data-lang-key="projTrafficDesc" style="font-size: 0.9rem; color: #666; margin-top: 10px;">Utilise 3 LEDs (Rouge, Jaune, Vert) pour simuler un feu de circulation.</p>
        </div>
        <div class="component-card" style="cursor: default;">
          <span class="component-icon">üéπ</span>
          <h3 data-lang-key="projPianoTitle">Piano √©lectronique</h3>
          <p data-lang-key="projPianoDesc" style="font-size: 0.9rem; color: #666; margin-top: 10px;">Utilise des boutons et un buzzer pour cr√©er ton propre instrument.</p>
        </div>
        <div class="component-card" style="cursor: default;">
          <span class="component-icon">üå°Ô∏è</span>
          <h3 data-lang-key="projTempTitle">Station M√©t√©o</h3>
          <p data-lang-key="projTempDesc" style="font-size: 0.9rem; color: #666; margin-top: 10px;">Affiche la temp√©rature et l'humidit√© sur un √©cran LCD.</p>
        </div>
      </div>
    </section>

    <!-- Quiz Section -->
    <section class="tutorial-section">
      <h2 data-lang-key="quizTitle">Quiz : Teste tes connaissances</h2>
      <div class="quiz-container">
        <div class="quiz-question" id="q1">
          <p class="question-text" data-lang-key="q1Text">√Ä quoi sert une r√©sistance avec une LED ?</p>
          <button class="quiz-opt" onclick="checkAnswer(this, false)" data-lang-key="q1Opt1">√Ä la faire briller plus fort</button>
          <button class="quiz-opt" onclick="checkAnswer(this, true)" data-lang-key="q1Opt2">√Ä limiter le courant pour ne pas la griller</button>
          <button class="quiz-opt" onclick="checkAnswer(this, false)" data-lang-key="q1Opt3">√Ä changer sa couleur</button>
          <p class="feedback"></p>
        </div>
        <div class="quiz-question" id="q2">
          <p class="question-text" data-lang-key="q2Text">Quelle fonction utilise-t-on pour envoyer du courant (5V) ?</p>
          <button class="quiz-opt" onclick="checkAnswer(this, true)" data-lang-key="q2Opt1">digitalWrite(pin, HIGH)</button>
          <button class="quiz-opt" onclick="checkAnswer(this, false)" data-lang-key="q2Opt2">digitalRead(pin)</button>
          <button class="quiz-opt" onclick="checkAnswer(this, false)" data-lang-key="q2Opt3">analogWrite(pin, 0)</button>
          <p class="feedback"></p>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <span data-lang-key="footerText">¬© KODIKIDS ‚Äî Enseignement de la programmation, des robots et de l'IA</span>
    </div>
  </footer>

  <script>
    const translations = {
      en: {
        pageTitle: "Discover Arduino",
        pageDesc: "Arduino is an easy-to-use open-source electronics platform. It is the ideal tool for creating interactive objects, from home automation to robots.",
        compTitle: "Basic Components",
        compDesc: "Click on a component to understand its role.",
        compUno: "Arduino Uno Board",
        compBread: "Breadboard",
        compLed: "LED",
        compRes: "Resistor",
        codeTitle: "Programming Arduino",
        codeDesc: "The Arduino language is based on C++. We use functions like `digitalWrite` to control electricity. Try the simulator below!",
        footerText: "¬© KODIKIDS ‚Äî Teaching programming, robotics, and AI",
        realLifeTitle: "In Real Life:",
        usageTitle: "How to use it?",
        detailUnoTitle: "Arduino Uno Board",
        detailUnoDesc: "The microcontroller board based on the ATmega328P. It has input/output pins to connect electronics and a USB port to upload code.",
        detailUnoUsage: "Connect it to your computer via USB. Use the Arduino IDE software to write and upload your code.",
        detailUnoReal: "Used in 3D printers, drones, and smart home devices.",
        detailBreadTitle: "Breadboard",
        detailBreadDesc: "A construction base for prototyping of electronics. It allows you to connect components without soldering.",
        detailBreadUsage: "Insert component legs into the holes. Rows are connected internally to allow electricity to flow.",
        detailBreadReal: "Used by engineers to test circuit designs before manufacturing permanent circuit boards (PCBs).",
        detailLedTitle: "LED (Light Emitting Diode)",
        detailLedDesc: "A semiconductor light source that emits light when current flows through it. It has a positive leg (Anode, long) and negative (Cathode, short).",
        detailLedUsage: "Connect the long leg to a digital pin and the short leg to GND (Ground). Always use a resistor!",
        detailLedReal: "Found in traffic lights, TV screens, and household lighting.",
        detailResTitle: "Resistor",
        detailResDesc: "A passive component that implements electrical resistance as a circuit element. It limits the flow of electric current.",
        detailResUsage: "Place it in series with an LED to prevent too much current from burning it out.",
        detailResReal: "Present in almost every electronic device to manage voltage and current levels.",
        projectTitle: "Project Ideas",
        projectDesc: "Some classic circuits to get started.",
        projTrafficTitle: "Traffic Light",
        projTrafficDesc: "Use 3 LEDs (Red, Yellow, Green) to simulate a traffic signal.",
        projPianoTitle: "Electronic Piano",
        projPianoDesc: "Use buttons and a buzzer to create your own instrument.",
        projTempTitle: "Weather Station",
        projTempDesc: "Display temperature and humidity on an LCD screen.",
        btnOn: "Turn LED On",
        btnOff: "Turn LED Off",
        btnBlink: "Blink",
        btnReset: "Reset",
        quizTitle: "Quiz: Test your knowledge",
        q1Text: "What is a resistor used for with an LED?",
        q1Opt1: "To make it shine brighter",
        q1Opt2: "To limit current and prevent burning",
        q1Opt3: "To change its color",
        q2Text: "Which function sends power (5V) to a pin?",
        q2Opt1: "digitalWrite(pin, HIGH)",
        q2Opt2: "digitalRead(pin)",
        q2Opt3: "analogWrite(pin, 0)",
        quizCorrect: "Correct! üéâ",
        quizWrong: "Try again! ‚ùå"
      },
      fr: {
        pageTitle: "D√©couvrir Arduino",
        pageDesc: "Arduino est une plateforme √©lectronique open-source facile √† utiliser. C'est l'outil id√©al pour cr√©er des objets interactifs, de la domotique aux robots.",
        compTitle: "Les composants de base",
        compDesc: "Cliquez sur un composant pour comprendre son r√¥le.",
        compUno: "Carte Arduino Uno",
        compBread: "Breadboard",
        compLed: "LED (DEL)",
        compRes: "R√©sistance",
        codeTitle: "Programmer l'Arduino",
        codeDesc: "Le langage Arduino est bas√© sur C++. On utilise des fonctions comme `digitalWrite` pour contr√¥ler l'√©lectricit√©. Teste le simulateur ci-dessous !",
        footerText: "¬© KODIKIDS ‚Äî Enseignement de la programmation, des robots et de l'IA",
        realLifeTitle: "Dans la vraie vie :",
        usageTitle: "Comment l'utiliser ?",
        detailUnoTitle: "Carte Arduino Uno",
        detailUnoDesc: "La carte microcontr√¥leur bas√©e sur l'ATmega328P. Elle a des broches d'entr√©e/sortie pour connecter l'√©lectronique et un port USB pour charger le code.",
        detailUnoUsage: "Connecte-la √† ton ordinateur via USB. Utilise le logiciel Arduino IDE pour √©crire et t√©l√©verser ton code.",
        detailUnoReal: "Utilis√©e dans les imprimantes 3D, les drones et les objets connect√©s.",
        detailBreadTitle: "Breadboard (Platine d'essai)",
        detailBreadDesc: "Une base de construction pour le prototypage √©lectronique. Elle permet de connecter des composants sans soudure.",
        detailBreadUsage: "Ins√®re les pattes des composants dans les trous. Les rang√©es sont connect√©es en interne pour laisser passer l'√©lectricit√©.",
        detailBreadReal: "Utilis√©e par les ing√©nieurs pour tester des circuits avant de fabriquer des cartes d√©finitives (PCB).",
        detailLedTitle: "LED (Diode √âlectroluminescente)",
        detailLedDesc: "Un composant qui √©met de la lumi√®re quand le courant le traverse. Elle a une patte positive (Anode, longue) et n√©gative (Cathode, courte).",
        detailLedUsage: "Connecte la patte longue √† une broche num√©rique et la courte au GND (Masse). Utilise toujours une r√©sistance !",
        detailLedReal: "Pr√©sente dans les feux tricolores, les √©crans TV et l'√©clairage domestique.",
        detailResTitle: "R√©sistance",
        detailResDesc: "Un composant qui limite le passage du courant √©lectrique. C'est comme un robinet qu'on ferme un peu.",
        detailResUsage: "Place-la en s√©rie avec une LED pour √©viter que trop de courant ne la grille.",
        detailResReal: "Pr√©sente dans presque tous les appareils √©lectroniques pour g√©rer les niveaux de tension.",
        projectTitle: "Id√©es de projets",
        projectDesc: "Quelques circuits classiques pour d√©buter.",
        projTrafficTitle: "Feu tricolore",
        projTrafficDesc: "Utilise 3 LEDs (Rouge, Jaune, Vert) pour simuler un feu de circulation.",
        projPianoTitle: "Piano √©lectronique",
        projPianoDesc: "Utilise des boutons et un buzzer pour cr√©er ton propre instrument.",
        projTempTitle: "Station M√©t√©o",
        projTempDesc: "Affiche la temp√©rature et l'humidit√© sur un √©cran LCD.",
        btnOn: "Allumer LED",
        btnOff: "√âteindre LED",
        btnBlink: "Clignoter (Blink)",
        btnReset: "R√©initialiser",
        quizTitle: "Quiz : Teste tes connaissances",
        q1Text: "√Ä quoi sert une r√©sistance avec une LED ?",
        q1Opt1: "√Ä la faire briller plus fort",
        q1Opt2: "√Ä limiter le courant pour ne pas la griller",
        q1Opt3: "√Ä changer sa couleur",
        q2Text: "Quelle fonction utilise-t-on pour envoyer du courant (5V) ?",
        q2Opt1: "digitalWrite(pin, HIGH)",
        q2Opt2: "digitalRead(pin)",
        q2Opt3: "analogWrite(pin, 0)",
        quizCorrect: "Correct ! üéâ",
        quizWrong: "Essaie encore ! ‚ùå"
      }
    };

    let currentLang = 'fr';
    const langSwitcher = document.getElementById('lang-switcher');

    function setLanguage(lang) {
      const trans = translations[lang];
      document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.dataset.langKey;
        if (trans[key]) el.textContent = trans[key];
      });
      currentLang = lang;
      if(langSwitcher) langSwitcher.textContent = lang === 'fr' ? 'EN' : 'FR';
      document.documentElement.lang = lang;
      
      const detailBox = document.getElementById('comp-detail');
      if(detailBox.style.display === 'block') {
         const titleEl = document.getElementById('detail-title');
         const descEl = document.getElementById('detail-desc');
         const usageEl = document.getElementById('detail-usage');
         const realEl = document.getElementById('detail-real-life');
         if(titleEl.dataset.langKey) titleEl.textContent = trans[titleEl.dataset.langKey];
         if(descEl.dataset.langKey) descEl.textContent = trans[descEl.dataset.langKey];
         if(usageEl.dataset.langKey) usageEl.textContent = trans[usageEl.dataset.langKey];
         if(realEl.dataset.langKey) realEl.textContent = trans[realEl.dataset.langKey];
      }
    }

    if(langSwitcher) {
      langSwitcher.addEventListener('click', () => {
        setLanguage(currentLang === 'fr' ? 'en' : 'fr');
      });
    }

    function showDetail(type) {
      const detailBox = document.getElementById('comp-detail');
      const titleEl = document.getElementById('detail-title');
      const descEl = document.getElementById('detail-desc');
      const usageEl = document.getElementById('detail-usage');
      const realEl = document.getElementById('detail-real-life');
      
      let tKeyTitle = '', tKeyDesc = '', tKeyUsage = '', tKeyReal = '';
      if(type === 'uno') { tKeyTitle = 'detailUnoTitle'; tKeyDesc = 'detailUnoDesc'; tKeyUsage = 'detailUnoUsage'; tKeyReal = 'detailUnoReal'; }
      if(type === 'breadboard') { tKeyTitle = 'detailBreadTitle'; tKeyDesc = 'detailBreadDesc'; tKeyUsage = 'detailBreadUsage'; tKeyReal = 'detailBreadReal'; }
      if(type === 'led') { tKeyTitle = 'detailLedTitle'; tKeyDesc = 'detailLedDesc'; tKeyUsage = 'detailLedUsage'; tKeyReal = 'detailLedReal'; }
      if(type === 'resistor') { tKeyTitle = 'detailResTitle'; tKeyDesc = 'detailResDesc'; tKeyUsage = 'detailResUsage'; tKeyReal = 'detailResReal'; }

      titleEl.setAttribute('data-lang-key', tKeyTitle);
      descEl.setAttribute('data-lang-key', tKeyDesc);
      usageEl.setAttribute('data-lang-key', tKeyUsage);
      realEl.setAttribute('data-lang-key', tKeyReal);
      
      titleEl.textContent = translations[currentLang][tKeyTitle];
      descEl.textContent = translations[currentLang][tKeyDesc];
      usageEl.textContent = translations[currentLang][tKeyUsage];
      realEl.textContent = translations[currentLang][tKeyReal];

      detailBox.style.display = 'block';
    }

    const led = document.getElementById('virtual-led');
    let blinkInterval = null;

    function runCommand(cmd) {
      if(blinkInterval) { clearInterval(blinkInterval); blinkInterval = null; }
      
      if(cmd === 'reset') {
        led.classList.remove('on');
      } else if(cmd === 'on') {
        led.classList.add('on');
      } else if(cmd === 'off') {
        led.classList.remove('on');
      } else if(cmd === 'blink') {
        let isOn = false;
        blinkInterval = setInterval(() => {
            isOn = !isOn;
            if(isOn) led.classList.add('on'); else led.classList.remove('on');
        }, 500);
      }
    }

    function checkAnswer(btn, isCorrect) {
      const parent = btn.parentElement;
      const feedback = parent.querySelector('.feedback');
      
      if(isCorrect) {
        btn.classList.add('correct');
        feedback.textContent = translations[currentLang].quizCorrect;
        feedback.style.color = '#00b894';
      } else {
        btn.classList.add('wrong');
        feedback.textContent = translations[currentLang].quizWrong;
        feedback.style.color = '#d63031';
        setTimeout(() => btn.classList.remove('wrong'), 1000);
      }
    }
  </script>
</body>
</html>